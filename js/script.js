// Enhanced seed data with detailed information - ALL 21 SEEDS INCLUDED
        let seeds = [
            {
                id: 1,
                name: "Nigerian 'Ogu' Okra",
                traditionalName: "Okwuru",
                image: "css/img/okra-seed.jpg",
                description: "Drought-tolerant, used in traditional soups. This variety has been cultivated in West Africa for generations.",
                keeper: {
                    name: "Elder Chidi",
                    info: "Verified community elder with 30+ years of seed saving",
                    avatar: "C"
                },
                story: "This seed has been in my family for four generations. My great-grandmother brought it with her when she moved from the village to the city. We use it to make the traditional 'okra soup' that's a staple in our family celebrations.",
                memory: "My grandmother taught me that this okra variety is special because it produces even during dry spells when other vegetables fail. She would say, 'This okra knows the rhythm of our land.'",
                culturalSignificance: "Okra is used in traditional ceremonies and is believed to bring prosperity. The slimy texture is considered a sign of fertility and abundance in our culture.",
                cultivation: {
                    sunlight: "Full sun, tolerates partial shade",
                    water: "Moderate water needs, drought-tolerant once established",
                    soil: "Well-drained, fertile soil",
                    spacing: "12-18 inches between plants",
                    season: "Warm season, plant after last frost"
                },
                uses: [
                    "Traditional soups and stews",
                    "Thickening agent for dishes",
                    "Fried okra as a snack",
                    "Medicinal uses for digestion"
                ],
                recipe: {
                    name: "Okra Soup (Obe Ilá)",
                    instructions: "Slice fresh okra thinly. Cook with palm oil, onions, peppers, and assorted meats or fish. Simmer until the okra releases its natural thickener. Serve with pounded yam or fufu."
                },
                isVerified: true,
                type: "vegetable",
                region: "west"
            },
            {
                id: 2,
                name: "Father's Sorghum",
                traditionalName: "Dawa",
                image: "css/img/sorghum-seed.jpg",
                description: "Heirloom grain perfect for traditional baking and brewing. Known for its resilience in dry conditions.",
                keeper: {
                    name: "Keeper Amina",
                    info: "Seed saver with 20+ years experience, specializing in grains",
                    avatar: "A"
                },
                story: "My father taught me how to grow this sorghum when I was just a girl. He said it was the same variety his father grew, and it has sustained our family through many difficult seasons. We use it to make traditional porridge and a special brew for ceremonies.",
                memory: "My father saved these seeds through times of drought and plenty. He always said that a family with sorghum seeds will never go hungry. These grains have sustained our community through difficult seasons.",
                culturalSignificance: "Sorghum is used in coming-of-age ceremonies and traditional brewing. The grain represents resilience - it grows where other crops fail. Our elders say it teaches us to be strong in difficult times.",
                cultivation: {
                    sunlight: "Full sun, highly heat-tolerant",
                    water: "Low water needs, extremely drought-resistant",
                    soil: "Adapts to various soils, prefers well-drained",
                    spacing: "4-6 inches between plants in rows",
                    season: "Warm season, planted after soil warms"
                },
                uses: [
                    "Flour for traditional flatbreads",
                    "Fermented for traditional beer",
                    "Porridge and breakfast meals",
                    "Animal fodder from leaves"
                ],
                recipe: {
                    name: "Ugali wa Dawa",
                    instructions: "Grind sorghum into flour, cook with water while stirring continuously until it forms a thick, smooth consistency. Serve with vegetables or meat."
                },
                isVerified: false,
                type: "grain",
                region: "east"
            },
            {
                id: 3,
                name: "Ethiopian Teff",
                traditionalName: "T'ef",
                image: "css/img/teff-seed.jpg",
                description: "Tiny ancient grain used to make injera, a traditional Ethiopian flatbread. Gluten-free and nutrient-dense.",
                keeper: {
                    name: "Grandmother Selam",
                    info: "Traditional baker preserving teff cultivation methods",
                    avatar: "S"
                },
                story: "My family has grown teff in the Ethiopian highlands for as long as anyone can remember. This grain is the heart of our cuisine and culture, used to make injera for every meal.",
                memory: "My grandmother would say that teff teaches us patience - it takes time to grow and even more time to ferment for perfect injera. But the wait is always worth it.",
                culturalSignificance: "Teff is central to Ethiopian identity and cuisine. Injera made from teff is served at all meals and symbolizes community as we share from the same plate.",
                cultivation: {
                    sunlight: "Full sun to partial shade",
                    water: "Moderate water needs",
                    soil: "Well-drained, fertile soil",
                    spacing: "Broadcast sowing",
                    season: "Rainy season crop"
                },
                uses: [
                    "Injera (fermented flatbread)",
                    "Porridge and traditional drinks",
                    "Thickening for stews",
                    "Nutritional supplement"
                ],
                recipe: {
                    name: "Traditional Injera",
                    instructions: "Grind teff grains into flour. Mix with water and allow to ferment for 2-3 days. Pour batter onto a hot clay plate (mitad) in a circular motion. Cook until holes form and edges lift. Serve with wat (stew)."
                },
                isVerified: true,
                type: "grain",
                region: "east"
            },
            {
                id: 4,
                name: "West African Fonio",
                traditionalName: "Acha",
                image: "css/img/fonio-seed.jpg",
                description: "Ancient drought-resistant grain with nutty flavor. Considered one of Africa's oldest cultivated cereals.",
                keeper: {
                    name: "Elder Issa",
                    info: "Seed keeper from Mali with ancestral knowledge",
                    avatar: "I"
                },
                story: "Fonio has sustained our people through famines and droughts. My ancestors called it the 'seed of the universe' because it could grow where nothing else would.",
                memory: "During the great drought of my childhood, when other crops failed, fonio still provided. My mother would say it was a gift from our ancestors to ensure our survival.",
                culturalSignificance: "Fonio is served during important ceremonies and is considered a sacred grain in many West African cultures. It represents resilience and connection to the land.",
                cultivation: {
                    sunlight: "Full sun",
                    water: "Low water needs, extremely drought-tolerant",
                    soil: "Poor, sandy soils",
                    spacing: "Broadcast sowing",
                    season: "Early rainy season"
                },
                uses: [
                    "Traditional porridge (fura)",
                    "Couscous-like dishes",
                    "Salads and side dishes",
                    "Brewing traditional beer"
                ],
                recipe: {
                    name: "Fonio Salad with Peanuts",
                    instructions: "Cook fonio according to package instructions. Let cool. Mix with chopped tomatoes, cucumbers, onions, and roasted peanuts. Dress with lemon juice, peanut oil, and a pinch of salt."
                },
                isVerified: true,
                type: "grain",
                region: "west"
            },
            {
                id: 5,
                name: "African Rice",
                traditionalName: "Oryza glaberrima",
                image: "css/img/african-rice-seed.jpg",
                keeper: {
                    name: "Keeper Fatou",
                    info: "Rice cultivator from Senegal preserving traditional varieties",
                    avatar: "F"
                },
                story: "This rice has been grown by my family in the Casamance region for generations. It has a distinct red color and nutty flavor that you won't find in Asian rice varieties.",
                memory: "My grandmother taught me how to harvest rice by hand, singing traditional songs that have been passed down through generations of women in our family.",
                culturalSignificance: "African rice is central to many West African ceremonies and is considered a sacred food in some cultures. It represents the deep agricultural history of Africa.",
                cultivation: {
                    sunlight: "Full sun",
                    water: "Flooded fields or upland conditions",
                    soil: "Heavy clay soils",
                    spacing: "Transplant seedlings in rows",
                    season: "Rainy season"
                },
                uses: [
                    "Traditional jollof rice",
                    "Steamed rice dishes",
                    "Rice flour for baking",
                    "Ceremonial dishes"
                ],
                recipe: {
                    name: "Senegalese Thieboudienne",
                    instructions: "Cook African rice with fish, tomatoes, onions, and a variety of vegetables like carrots, eggplant, and cabbage. Season with traditional herbs and spices for an authentic Senegalese dish."
                },
                isVerified: true,
                type: "grain",
                region: "west"
            },
            {
                id: 6,
                name: "Bambara Groundnut",
                traditionalName: "Nzama",
                image: "css/img/bambara-seed.jpg",
                description: "Protein-rich legume that grows underground like peanuts. Extremely drought-resistant and nutritious.",
                keeper: {
                    name: "Elder Jabari",
                    info: "Legume specialist from Zimbabwe",
                    avatar: "J"
                },
                story: "The Bambara groundnut has been called the 'complete food' because it contains protein, carbohydrates, and oil. During times of scarcity, it has saved many communities from hunger.",
                memory: "My father would tell stories of how this legume sustained our village during the liberation struggle, when other crops were destroyed. It grows with very little care but gives so much.",
                culturalSignificance: "In many cultures, Bambara groundnuts are used in coming-of-age ceremonies and are considered a symbol of resilience and self-sufficiency.",
                cultivation: {
                    sunlight: "Full sun",
                    water: "Very low water requirements",
                    soil: "Poor, sandy soils",
                    spacing: "12-18 inches between plants",
                    season: "Warm season after rains begin"
                },
                uses: [
                    "Boiled as a snack",
                    "Ground into flour",
                    "Added to soups and stews",
                    "Roasted like peanuts"
                ],
                recipe: {
                    name: "Bambara Nut Stew",
                    instructions: "Soak Bambara nuts overnight. Cook with tomatoes, onions, and your choice of meat or vegetables. Season with traditional spices and serve with rice or fufu."
                },
                isVerified: true,
                type: "legume",
                region: "south"
            },
            {
                id: 7,
                name: "Baobab",
                traditionalName: "The Tree of Life",
                image: "css/img/baobab-seed.jpg",
                description: "Iconic African tree with fruit rich in vitamin C and antioxidants. Every part of the tree has traditional uses.",
                keeper: {
                    name: "Elder Sibo",
                    info: "Traditional healer and baobab guardian",
                    avatar: "S"
                },
                story: "The baobab tree has been part of our landscape and culture for thousands of years. My ancestors believed that the first baobab was planted by the gods themselves.",
                memory: "As children, we would wait for the baobab fruit to fall, then crack them open to eat the tangy pulp. The elders said it would make us strong and protect us from illness.",
                culturalSignificance: "Baobabs are often considered sacred and are meeting places for communities. Their incredible longevity (up to 3,000 years) symbolizes wisdom and endurance.",
                cultivation: {
                    sunlight: "Full sun",
                    water: "Drought-tolerant once established",
                    soil: "Well-drained soil",
                    spacing: "At least 15 meters between trees",
                    season: "Fruits naturally dry on tree"
                },
                uses: [
                    "Fruit pulp for drinks and porridge",
                    "Leaves as vegetables",
                    "Seeds for oil and snacks",
                    "Bark for rope and cloth"
                ],
                recipe: {
                    name: "Baobab Juice",
                    instructions: "Mix baobab fruit pulp with water and sugar to taste. Strain to remove seeds and fibers. Serve chilled as a refreshing and nutritious drink rich in vitamin C."
                },
                isVerified: true,
                type: "fruit",
                region: "south"
            },
            {
                id: 8,
                name: "African Yam",
                traditionalName: "Ji",
                image: "css/img/yam-seed.jpg",
                description: "True yams native to West Africa, distinct from sweet potatoes. Starchy tubers that are cultural staples.",
                keeper: {
                    name: "Yam Chief Kwame",
                    info: "Yam cultivation expert from Ghana",
                    avatar: "K"
                },
                story: "In my culture, yams are more than food - they represent life and prosperity. The New Yam Festival is one of our most important celebrations, marking the beginning of the harvest season.",
                memory: "My grandfather taught me that each yam has a spirit, and we must thank the earth for providing it. He would perform a small ceremony before the first harvest each year.",
                culturalSignificance: "Yams are central to many West African cultures, symbolizing fertility, sustenance, and the connection between people and the land. They feature prominently in festivals and rituals.",
                cultivation: {
                    sunlight: "Full sun to partial shade",
                    water: "Regular watering, but well-drained soil",
                    soil: "Rich, loamy soil",
                    spacing: "1 meter between mounds",
                    season: "Planted at start of rainy season"
                },
                uses: [
                    "Pounded yam (fufu)",
                    "Boiled or roasted yam",
                    "Yam flour for amala",
                    "Yam porridge"
                ],
                recipe: {
                    name: "Pounded Yam (Fufu)",
                    instructions: "Peel and boil yam until very soft. Pound in a mortar with a pestle until smooth and stretchy. Serve with soups like egusi or okra soup."
                },
                isVerified: true,
                type: "tuber",
                region: "west"
            },
            {
                id: 9,
                name: "Kola Nut",
                traditionalName: "Oji",
                image: "css/img/kola-nut-seed.jpg",
                description: "Caffeine-containing nuts used ceremonially and socially across West Africa. Symbol of hospitality and friendship.",
                keeper: {
                    name: "Elder Nneka",
                    info: "Kola nut tradition keeper from Nigeria",
                    avatar: "N"
                },
                story: "The kola nut has been part of our social fabric for centuries. We present it to guests as a sign of welcome and use it in ceremonies to bless marriages and naming ceremonies.",
                memory: "My father always kept a special calabash of kola nuts for important visitors. The ritual of breaking and sharing the nut created bonds between people that words alone could not.",
                culturalSignificance: "Kola nuts are integral to many West African social and religious practices. They symbolize friendship, respect, and the sealing of agreements between people.",
                cultivation: {
                    sunlight: "Partial shade when young, full sun when mature",
                    water: "Regular watering",
                    soil: "Rich, well-drained soil",
                    spacing: "10-15 meters between trees",
                    season: "Year-round in tropical climates"
                },
                uses: [
                    "Ceremonial offerings",
                    "Traditional medicine",
                    "Stimulant (chewed)",
                    "Flavoring in beverages"
                ],
                recipe: {
                    name: "Kola Nut Ceremony",
                    instructions: "Present kola nuts on a special plate. The eldest person present says prayers and breaks the nut, distributing pieces to everyone. Each person chews their piece slowly, reflecting on unity and friendship."
                },
                isVerified: true,
                type: "fruit",
                region: "west"
            },
            {
                id: 10,
                name: "Watermelon",
                traditionalName: "Citrullus lanatus",
                image: "css/img/watermelon-seed.jpg",
                description: "Originally domesticated in West Africa from white, bitter melons. Now enjoyed worldwide for its sweet, refreshing flesh.",
                keeper: {
                    name: "Gardener Lindiwe",
                    info: "Horticulturalist preserving ancient watermelon varieties",
                    avatar: "L"
                },
                story: "Many people don't know that watermelons come from Africa. The wild ancestors of today's sweet watermelons still grow in the Kalahari Desert, where they were first domesticated.",
                memory: "My grandmother would save watermelon seeds each year, telling us that each seed carried the story of our land and the wisdom of our ancestors who first cultivated this fruit.",
                culturalSignificance: "Watermelons have a complex history, from their African origins to becoming a symbol of Black American resilience and self-sufficiency after Emancipation.",
                cultivation: {
                    sunlight: "Full sun",
                    water: "Regular deep watering",
                    soil: "Sandy, well-drained soil",
                    spacing: "3-5 feet between plants",
                    season: "Warm season, frost-sensitive"
                },
                uses: [
                    "Fresh eating",
                    "Juices and smoothies",
                    "Salads",
                    "Seeds roasted as snack"
                ],
                recipe: {
                    name: "Watermelon Salad with Feta",
                    instructions: "Cube watermelon and mix with crumbled feta cheese, fresh mint leaves, and a drizzle of olive oil. Add a squeeze of lime juice and a pinch of salt for a refreshing summer salad."
                },
                isVerified: true,
                type: "fruit",
                region: "south"
            },
            {
                id: 11,
                name: "Black-eyed Peas",
                traditionalName: "Ewa",
                image: "css/img/black-eyed-peas-seed.jpg",
                description: "Protein-rich legumes central to West African cuisine. Drought-tolerant and easy to grow.",
                keeper: {
                    name: "Keeper Adanna",
                    info: "Legume preservation specialist from Nigeria",
                    avatar: "A"
                },
                story: "Black-eyed peas have been a staple in my family for generations. We plant them alongside our yams as they fix nitrogen in the soil, making the land more fertile for other crops.",
                memory: "My mother would always cook a big pot of black-eyed peas on New Year's Day, saying it would bring prosperity in the coming year. This tradition has been in our family for as long as anyone can remember.",
                culturalSignificance: "In West Africa, black-eyed peas are everyday food, but they also hold symbolic meaning in many cultures, representing good luck and prosperity.",
                cultivation: {
                    sunlight: "Full sun",
                    water: "Moderate water needs",
                    soil: "Well-drained soil",
                    spacing: "4-6 inches apart in rows",
                    season: "Warm season after last frost"
                },
                uses: [
                    "Traditional stews",
                    "Akara (bean fritters)",
                    "Moi moi (steamed bean pudding)",
                    "Salads and side dishes"
                ],
                recipe: {
                    name: "Nigerian Ewa Agoyin",
                    instructions: "Cook black-eyed peas until very soft. Mash slightly. Serve with a spicy tomato and pepper sauce made with palm oil, onions, and dried peppers."
                },
                isVerified: true,
                type: "legume",
                region: "west"
            },
            {
                id: 12,
                name: "Sesame",
                traditionalName: "Benne",
                image: "css/img/sesame-seed.jpg",
                description: "Oil-rich seeds domesticated in Africa thousands of years ago. Used for oil, paste, and as a flavoring.",
                keeper: {
                    name: "Elder Zuberi",
                    info: "Oil seed specialist from Sudan",
                    avatar: "Z"
                },
                story: "Sesame has been grown in Africa since ancient times. The name 'benne' comes from West African languages and was brought to the Americas during the transatlantic slave trade.",
                memory: "My grandfather would tell stories of how sesame was used as currency in some ancient African kingdoms. He said each tiny seed represented the immense value of our agricultural heritage.",
                culturalSignificance: "Sesame seeds are used in many African cuisines and traditional medicines. In some cultures, they symbolize immortality because the plant continues to produce seeds even in difficult conditions.",
                cultivation: {
                    sunlight: "Full sun",
                    water: "Drought-tolerant once established",
                    soil: "Well-drained, fertile soil",
                    spacing: "12-18 inches between plants",
                    season: "Warm season, frost-sensitive"
                },
                uses: [
                    "Tahini (sesame paste)",
                    "Cooking oil",
                    "Benne wafers and cookies",
                    "Garnish for dishes"
                ],
                recipe: {
                    name: "Tahini Sauce",
                    instructions: "Mix sesame paste (tahini) with lemon juice, garlic, and water until smooth. Add salt to taste. Use as a sauce for falafel, vegetables, or as a salad dressing."
                },
                isVerified: true,
                type: "legume",
                region: "east"
            },
            {
                id: 13,
                name: "Jute Mallow",
                traditionalName: "Ewedu",
                image: "css/img/jute-mallow-seed.jpg",
                description: "Leafy green vegetable with slippery texture when cooked. Popular in West African soups and stews.",
                keeper: {
                    name: "Gardener Funmilayo",
                    info: "Traditional vegetable cultivator from Nigeria",
                    avatar: "F"
                },
                story: "Ewedu has been grown by my family for generations. We use it to make a traditional soup that's served with amala (yam flour). The slippery texture is believed to aid digestion.",
                memory: "My grandmother would say that ewedu teaches us flexibility - it appears delicate but is incredibly resilient, growing back quickly after harvesting.",
                culturalSignificance: "In Yoruba culture, ewedu soup is a staple food with cultural importance. It's often served at celebrations and family gatherings.",
                cultivation: {
                    sunlight: "Full sun to partial shade",
                    water: "Regular watering",
                    soil: "Rich, well-drained soil",
                    spacing: "6-8 inches between plants",
                    season: "Warm season, year-round in tropics"
                },
                uses: [
                    "Ewedu soup",
                    "Steamed as a side dish",
                    "Added to stews",
                    "Medicinal uses for digestion"
                ],
                recipe: {
                    name: "Ewedu Soup",
                    instructions: "Wash jute leaves and cook until soft. Blend with a little water to create a slimy consistency. Season with locust beans (iru), crayfish, and bouillon. Serve with amala or other swallows."
                },
                isVerified: true,
                type: "vegetable",
                region: "west"
            },
            {
                id: 14,
                name: "Amaranth",
                traditionalName: "Tete",
                image: "css/img/amaranth-seed.jpg",
                description: "Nutrient-dense leafy green and grain. Both leaves and seeds are edible and highly nutritious.",
                keeper: {
                    name: "Herbalist Nia",
                    info: "Medicinal plant expert from Kenya",
                    avatar: "N"
                },
                story: "Amaranth was once banned by colonial powers who recognized its importance to our food sovereignty. But our elders secretly preserved the seeds, and today it's making a comeback.",
                memory: "My great-grandmother would tell stories of hiding amaranth seeds during the colonial era. She said the plant's resilience mirrored our people's determination to preserve our culture.",
                culturalSignificance: "Amaranth represents resistance and cultural preservation. Its revival symbolizes the reclamation of African food sovereignty and traditional knowledge.",
                cultivation: {
                    sunlight: "Full sun",
                    water: "Drought-tolerant once established",
                    soil: "Well-drained soil",
                    spacing: "10-12 inches between plants",
                    season: "Warm season"
                },
                uses: [
                    "Leafy green vegetable",
                    "Grain for porridge or flour",
                    "Medicinal herb",
                    "Animal fodder"
                ],
                recipe: {
                    name: "Amaranth Leaf Stew",
                    instructions: "Sauté onions and tomatoes in oil. Add chopped amaranth leaves and cook until wilted. Add peanut butter and a little water to create a sauce. Serve with ugali or rice."
                },
                isVerified: true,
                type: "vegetable",
                region: "east"
            },
            {
                id: 15,
                name: "African Yam Bean",
                traditionalName: "Azama",
                image: "css/img/yam-bean-seed.jpg",
                description: "Unique plant that produces both edible tubers and protein-rich beans. Drought-resistant and nutritious.",
                keeper: {
                    name: "Farmer Chukwu",
                    info: "Tuber and legume specialist from Cameroon",
                    avatar: "C"
                },
                story: "The African yam bean is a remarkable plant - it gives us both roots to eat like yams and beans rich in protein. My ancestors called it the 'two-in-one blessing' from the earth.",
                memory: "My father taught me that this plant teaches us about abundance and efficiency. It makes the most of the soil and climate, providing multiple foods from one plant.",
                culturalSignificance: "This plant represents the ingenuity of traditional African agricultural systems that maximize food production through intercropping and multi-purpose plants.",
                cultivation: {
                    sunlight: "Full sun to partial shade",
                    water: "Moderate water needs",
                    soil: "Well-drained soil",
                    spacing: "2-3 feet between plants",
                    season: "Planted at beginning of rains"
                },
                uses: [
                    "Tubers boiled or roasted",
                    "Beans cooked in stews",
                    "Young shoots as vegetables",
                    "Flour from dried tubers"
                ],
                recipe: {
                    name: "Yam Bean and Vegetable Stew",
                    instructions: "Peel and cube yam bean tubers. Cook with beans from the same plant, along with tomatoes, peppers, and leafy greens. Season with traditional spices and serve as a complete meal."
                },
                isVerified: true,
                type: "tuber",
                region: "central"
            },
            {
                id: 16,
                name: "Tamarind",
                traditionalName: "Tsamia",
                image: "css/img/tamarind-seed.jpg",
                description: "Tart fruit pods used in cooking, beverages, and traditional medicine. Rich in vitamins and antioxidants.",
                keeper: {
                    name: "Healer Amina",
                    info: "Traditional medicine practitioner from Sudan",
                    avatar: "A"
                },
                story: "The tamarind tree has provided for my community for generations. We use its fruit for food, its leaves for medicine, and its shade for gathering places.",
                memory: "As children, we would suck on fresh tamarind pods, our faces puckering at the sour taste. The elders would laugh and say it was building our character.",
                culturalSignificance: "Tamarind trees are often planted in central village locations where people gather. The tree symbolizes community, healing, and the sharing of resources.",
                cultivation: {
                    sunlight: "Full sun",
                    water: "Drought-tolerant once established",
                    soil: "Well-drained soil",
                    spacing: "At least 10 meters between trees",
                    season: "Fruits year-round in tropics"
                },
                uses: [
                    "Tamarind juice and concentrates",
                    "Sour flavoring in dishes",
                    "Traditional medicine for digestion",
                    "Wood for furniture and tools"
                ],
                recipe: {
                    name: "Tamarind Drink",
                    instructions: "Soak tamarind pulp in warm water until soft. Strain to remove seeds and fibers. Sweeten with sugar or honey and dilute with more water to taste. Serve chilled."
                },
                isVerified: true,
                type: "fruit",
                region: "east"
            },
            {
                id: 17,
                name: "Oil Palm",
                traditionalName: "Nkwu",
                image: "css/img/palm-seed.jpg",
                description: "Native African palm tree producing oil-rich fruits. Traditionally used for cooking oil, soap, and other products.",
                keeper: {
                    name: "Palm Tapper Obi",
                    info: "Traditional palm oil producer from Nigeria",
                    avatar: "O"
                },
                story: "The oil palm is deeply woven into our culture and economy. My family has been producing red palm oil using traditional methods for generations, preserving the nutrients and flavor.",
                memory: "My grandfather taught me that palm oil is the blood of our land - it nourishes our bodies and connects us to our ancestors who first cultivated these trees.",
                culturalSignificance: "Palm oil is used in many traditional ceremonies and is a symbol of vitality and celebration. The red color represents life force in many West African cultures.",
                cultivation: {
                    sunlight: "Full sun",
                    water: "Regular rainfall needed",
                    soil: "Well-drained soil",
                    spacing: "9 meters between trees",
                    season: "Produces fruit year-round"
                },
                uses: [
                    "Red palm oil for cooking",
                    "Palm wine from sap",
                    "Palm kernel oil for soap",
                    "Fronds for weaving"
                ],
                recipe: {
                    name: "Traditional Palm Oil Stew",
                    instructions: "Heat red palm oil until it clears. Add chopped onions, peppers, and meat or fish. Cook until done. Add traditional seasonings and serve with rice or fufu."
                },
                isVerified: true,
                type: "fruit",
                region: "west"
            },
            {
                id: 18,
                name: "Hibiscus",
                traditionalName: "Zobo",
                image: "css/img/hibiscus-seed.jpg",
                description: "Flowers used to make a tart, refreshing drink known as bissap or zobo. Rich in vitamin C and antioxidants.",
                keeper: {
                    name: "Herbalist Safiya",
                    info: "Medicinal plant expert from Niger",
                    avatar: "S"
                },
                story: "Hibiscus has been used in my family for both food and medicine for as long as anyone can remember. The deep red drink is served at celebrations and used to cool the body in hot weather.",
                memory: "My grandmother would make hibiscus tea for anyone feeling unwell, saying its red color carried the strength of the earth and could restore vitality.",
                culturalSignificance: "Hibiscus drinks are served at social gatherings across West Africa, symbolizing hospitality and community. The plant is also used in traditional healing practices.",
                cultivation: {
                    sunlight: "Full sun",
                    water: "Moderate water needs",
                    soil: "Well-drained soil",
                    spacing: "3-4 feet between plants",
                    season: "Warm season, year-round in tropics"
                },
                uses: [
                    "Zobo/bissap drink",
                    "Herbal tea",
                    "Natural food coloring",
                    "Traditional medicine"
                ],
                recipe: {
                    name: "Zobo Drink",
                    instructions: "Wash dried hibiscus flowers. Boil with water, ginger, and cloves for 15-20 minutes. Strain and sweeten with sugar or honey. Flavor with pineapple or orange juice if desired. Serve chilled."
                },
                isVerified: true,
                type: "fruit",
                region: "west"
            },
            {
                id: 19,
                name: "Spider Plant",
                traditionalName: "Saget",
                image: "css/img/spider-seed.jpg",
                description: "Leafy green vegetable with high nutritional value. Grows well in various African climates.",
                keeper: {
                    name: "Gardener Wambui",
                    info: "Indigenous vegetable promoter from Kenya",
                    avatar: "W"
                },
                story: "Spider plant is one of the traditional leafy greens that sustained our communities before the introduction of cabbage and kale. It's rich in vitamins and grows with little care.",
                memory: "My mother would send us children to harvest spider plant from the fields. She said its quick regrowth after harvesting taught us about resilience and renewal.",
                culturalSignificance: "Spider plant and other indigenous leafy greens represent food sovereignty and the value of traditional food systems that are adapted to local environments.",
                cultivation: {
                    sunlight: "Full sun to partial shade",
                    water: "Moderate water needs",
                    soil: "Well-drained soil",
                    spacing: "8-10 inches between plants",
                    season: "Year-round in suitable climates"
                },
                uses: [
                    "Cooked leafy green",
                    "Added to soups and stews",
                    "Medicinal uses",
                    "Animal fodder"
                ],
                recipe: {
                    name: "Sautéed Spider Plant",
                    instructions: "Wash and chop spider plant leaves. Sauté with onions and tomatoes in a little oil. Add a splash of water, cover, and steam until tender. Season with salt and serve as a side dish."
                },
                isVerified: true,
                type: "vegetable",
                region: "east"
            },
            {
                id: 20,
                name: "Cowpea Leaves",
                traditionalName: "Kunde",
                image: "css/img/cowpea-seed.png",
                description: "Nutritious leaves from the cowpea plant. Cooked as a vegetable while waiting for the beans to mature.",
                keeper: {
                    name: "Farmer Jelani",
                    info: "Sustainable agriculture practitioner from Tanzania",
                    avatar: "J"
                },
                story: "Cowpeas give us two harvests - the leaves while the plant is growing, and the beans later. This makes them an efficient and reliable food source that has sustained African communities for centuries.",
                memory: "My grandmother would say that cowpeas teach us about patience and delayed gratification - we enjoy the leaves now, but save the best (the beans) for later.",
                culturalSignificance: "Cowpea leaves represent the efficiency of traditional African agricultural systems that maximize food production from each plant, reducing waste and increasing food security.",
                cultivation: {
                    sunlight: "Full sun",
                    water: "Drought-tolerant",
                    soil: "Well-drained soil",
                    spacing: "4-6 inches between plants",
                    season: "Warm season"
                },
                uses: [
                    "Leafy green vegetable",
                    "Added to stews and soups",
                    "Medicinal uses",
                    "Animal fodder"
                ],
                recipe: {
                    name: "Kunde (Cowpea Leaf Stew)",
                    instructions: "Sauté onions and tomatoes. Add chopped cowpea leaves and a little water. Cook until tender. Add peanut butter for richness and season with salt. Serve with ugali or rice."
                },
                isVerified: true,
                type: "vegetable",
                region: "east"
            },
            {
                id: 21,
                name: "Guinea Millet",
                traditionalName: "Hungry Rice",
                image: "css/img/guinea-millet-seed.jpg",
                description: "Small-seeded grain that grows in poor soils. Highly nutritious and drought-resistant.",
                keeper: {
                    name: "Elder Diallo",
                    info: "Ancient grain preservationist from Mali",
                    avatar: "D"
                },
                story: "Guinea millet has been called 'hungry rice' because it grows quickly and can be harvested when other crops fail. It has saved many communities from famine during difficult times.",
                memory: "My father would say that Guinea millet is humble but mighty - it doesn't need much, but gives everything it has to ensure our survival.",
                culturalSignificance: "This grain represents food security and resilience. Its ability to grow in challenging conditions makes it a crucial crop for climate adaptation in Africa.",
                cultivation: {
                    sunlight: "Full sun",
                    water: "Very low water requirements",
                    soil: "Poor, sandy soils",
                    spacing: "Broadcast sowing",
                    season: "Short rainy season"
                },
                uses: [
                    "Porridge",
                    "Flour for bread",
                    "Traditional beers",
                    "Animal feed"
                ],
                recipe: {
                    name: "Guinea Millet Porridge",
                    instructions: "Toast Guinea millet grains lightly, then grind into flour. Cook with water or milk, stirring constantly until thick. Sweeten with honey or sugar and serve for breakfast."
                },
                isVerified: true,
                type: "grain",
                region: "west"
            }
        ];

        // DOM elements
        const seedsContainer = document.getElementById('seeds-container');
        const homepageContent = document.getElementById('homepageContent');
        const seedDetailPage = document.getElementById('seedDetailPage');
        const backToBrowse = document.getElementById('backToBrowse');
        const requestModal = document.getElementById('requestModal');
        const qrModal = document.getElementById('qrModal');
        const loginModal = document.getElementById('loginModal');
        const signupModal = document.getElementById('signupModal');
        const addSeedModal = document.getElementById('addSeedModal');
        const closeModalButtons = document.querySelectorAll('.close-modal');
        const detailPlayAudioBtn = document.getElementById('detailPlayAudio');
        const detailAudioProgress = document.getElementById('detailAudioProgress');
        const detailAudioTime = document.getElementById('detailAudioTime');
        const loginBtn = document.getElementById('loginBtn');
        const browseSeedsBtn = document.getElementById('browseSeedsBtn');
        const addSeedBtn = document.getElementById('addSeedBtn');
        const exploreVaultBtn = document.getElementById('exploreVaultBtn');
        const joinLocalCommunityBtn = document.getElementById('joinLocalCommunityBtn');
        const joinMovementBtn = document.getElementById('joinMovementBtn');
        const resetMapViewBtn = document.getElementById('resetMapView');
        const locateMeBtn = document.getElementById('locateMe');
        const detailRequestSeedsBtn = document.getElementById('detailRequestSeedsBtn');
        const detailViewQrCodeBtn = document.getElementById('detailViewQrCodeBtn');
        const detailCtaRequestBtn = document.getElementById('detailCtaRequestBtn');
        const cancelRequestBtn = document.getElementById('cancelRequestBtn');
        const cancelAddSeedBtn = document.getElementById('cancelAddSeedBtn');
        const loginForm = document.getElementById('loginForm');
        const signupForm = document.getElementById('signupForm');
        const addSeedForm = document.getElementById('addSeedForm');
        const requestForm = document.getElementById('requestForm');
        const toast = document.getElementById('toast');
        const tabButtons = document.querySelectorAll('.tab-btn');
        const qrCodeCanvas = document.getElementById('qrCode');
        const signupPassword = document.getElementById('signupPassword');
        const passwordStrengthBar = document.getElementById('passwordStrengthBar');
        const signupSubmitBtn = document.getElementById('signupSubmitBtn');
        const seedKeepersCount = document.getElementById('seedKeepersCount');
        const regionsCount = document.getElementById('regionsCount');

        // Password requirements elements
        const lengthReq = document.getElementById('lengthReq');
        const uppercaseReq = document.getElementById('uppercaseReq');
        const lowercaseReq = document.getElementById('lowercaseReq');
        const numberReq = document.getElementById('numberReq');
        const specialReq = document.getElementById('specialReq');

        // Current seed being viewed
        let currentSeed = null;
        let currentAudioInterval = null;
        let isLoggedIn = false;
        let currentUser = null;
        let communityMap = null;
        let communityMembers = [];

        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            loadSeedsFromStorage();
            displaySeeds(seeds);
            setupEventListeners();
            checkLoginStatus();
            initializeCommunityMap();
            loadCommunityMembers();
        });

        // Load seeds from localStorage
        function loadSeedsFromStorage() {
            const savedSeeds = localStorage.getItem('sankofaUserSeeds');
            if (savedSeeds) {
                const userSeeds = JSON.parse(savedSeeds);
                seeds = [...seeds, ...userSeeds];
            }
        }

        // Save user seeds to localStorage
        function saveUserSeedsToStorage() {
            const userSeeds = seeds.filter(seed => seed.userAdded);
            localStorage.setItem('sankofaUserSeeds', JSON.stringify(userSeeds));
        }

        // Initialize community map with OpenStreetMap
        function initializeCommunityMap() {
            // Initialize the map centered on Africa
            communityMap = L.map('communityMap').setView([8.7832, 34.5085], 3);
            
            // Add OpenStreetMap tiles
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
                maxZoom: 18,
            }).addTo(communityMap);
            
            // Add map controls
            communityMap.addControl(new L.Control.Zoom());
        }

        // Load community members from localStorage
        function loadCommunityMembers() {
            const savedMembers = localStorage.getItem('sankofaCommunityMembers');
            if (savedMembers) {
                communityMembers = JSON.parse(savedMembers);
                updateCommunityMap();
                updateCommunityStats();
            }
        }

        // Save community members to localStorage
        function saveCommunityMembers() {
            localStorage.setItem('sankofaCommunityMembers', JSON.stringify(communityMembers));
        }

        // Add a new community member to the map
        function addCommunityMember(name, location, coordinates) {
            const newMember = {
                id: Date.now(),
                name: name,
                location: location,
                coordinates: coordinates,
                joinDate: new Date().toISOString()
            };
            
            communityMembers.push(newMember);
            saveCommunityMembers();
            updateCommunityMap();
            updateCommunityStats();
            
            // Show a popup at the new member's location
            const marker = L.marker(coordinates).addTo(communityMap);
            marker.bindPopup(`<b>${name}</b><br>${location}<br>Joined: ${new Date(newMember.joinDate).toLocaleDateString()}`).openPopup();
            
            // Pan to the new member
            communityMap.setView(coordinates, 5);
        }

        // Update the community map with all members
        function updateCommunityMap() {
            // Clear existing markers (except base layers)
            communityMap.eachLayer((layer) => {
                if (layer instanceof L.Marker) {
                    communityMap.removeLayer(layer);
                }
            });
            
            // Add markers for all community members
            communityMembers.forEach(member => {
                const marker = L.marker(member.coordinates).addTo(communityMap);
                marker.bindPopup(`<b>${member.name}</b><br>${location}<br>Joined: ${new Date(member.joinDate).toLocaleDateString()}`);
            });
        }

        // Update community statistics
        function updateCommunityStats() {
            seedKeepersCount.textContent = communityMembers.length;
            
            // Count unique regions (simplified)
            const regions = new Set(communityMembers.map(member => {
                // Extract country from location (simple approach)
                const parts = member.location.split(',');
                return parts[parts.length - 1].trim();
            }));
            
            regionsCount.textContent = regions.size;
        }

        // Geocode a location string to coordinates
        function geocodeLocation(location, callback) {
            // For demo purposes, we'll use a simple mapping of major African cities
            // In a real app, you would use a geocoding service like Nominatim
            const locationMap = {
                'accra, ghana': [5.6037, -0.1870],
                'lagos, nigeria': [6.5244, 3.3792],
                'nairobi, kenya': [-1.2921, 36.8219],
                'dar es salaam, tanzania': [-6.7924, 39.2083],
                'addis ababa, ethiopia': [9.0320, 38.7469],
                'cairo, egypt': [30.0444, 31.2357],
                'johannesburg, south africa': [-26.2041, 28.0473],
                'kampala, uganda': [0.3476, 32.5825],
                'dakar, senegal': [14.7167, -17.4677],
                'abuja, nigeria': [9.0765, 7.3986]
            };
            
            const normalizedLocation = location.toLowerCase().trim();
            
            if (locationMap[normalizedLocation]) {
                callback(locationMap[normalizedLocation]);
            } else {
                // Fallback: generate random coordinates within Africa
                const randomLat = Math.random() * 35 - 20; // Between -20 and 15
                const randomLng = Math.random() * 60 - 20; // Between -20 and 40
                callback([randomLat, randomLng]);
            }
        }

        // Display seeds in the grid
        function displaySeeds(seedsToShow) {
            seedsContainer.innerHTML = '';
            
            seedsToShow.forEach(seed => {
                const seedCard = document.createElement('div');
                seedCard.className = 'seed-card';
                
                seedCard.innerHTML = `
                    <img src="${seed.image}" alt="${seed.name}" class="seed-image">
                    <div class="seed-content">
                        <div class="seed-header">
                            <h3 class="seed-name">${seed.name}</h3>
                            ${seed.isVerified ? 
                                '<span class="verified-badge"><i class="fas fa-check"></i> Verified</span>' : 
                                ''}
                        </div>
                        <div class="seed-keeper">${seed.keeper.name}</div>
                        <p class="seed-description">${seed.description}</p>
                        <div class="seed-actions">
                            <button class="btn view-seed-btn" data-id="${seed.id}">View Story</button>
                            <button class="btn btn-secondary request-seed-btn" data-id="${seed.id}">Request</button>
                        </div>
                        ${seed.userAdded ? `
                            <div class="user-seed-actions">
                                <button class="btn btn-danger delete-seed-btn" data-id="${seed.id}">Delete</button>
                            </div>
                        ` : ''}
                    </div>
                `;
                
                seedsContainer.appendChild(seedCard);
            });
            
            // Add event listeners to view buttons
            document.querySelectorAll('.view-seed-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const seedId = parseInt(this.getAttribute('data-id'));
                    openSeedDetailPage(seedId);
                });
            });
            
            // Add event listeners to request buttons
            document.querySelectorAll('.request-seed-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const seedId = parseInt(this.getAttribute('data-id'));
                    const seed = seeds.find(s => s.id === seedId);
                    openRequestModal(seed);
                });
            });
            
            // Add event listeners to delete buttons
            document.querySelectorAll('.delete-seed-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const seedId = parseInt(this.getAttribute('data-id'));
                    deleteSeed(seedId);
                });
            });
        }

        // Delete a user-added seed
        function deleteSeed(seedId) {
            if (confirm("Are you sure you want to delete this seed? This action cannot be undone.")) {
                seeds = seeds.filter(seed => seed.id !== seedId);
                saveUserSeedsToStorage();
                displaySeeds(seeds);
                showToast('Seed deleted successfully');
            }
        }

        // Open seed detail page
        function openSeedDetailPage(seedId) {
            const seed = seeds.find(s => s.id === seedId);
            if (!seed) return;
            
            currentSeed = seed;
            
            // Update seed detail page content
            document.getElementById('detailSeedImage').src = seed.image;
            document.getElementById('detailSeedName').textContent = seed.name;
            document.getElementById('detailTraditionalName').textContent = seed.traditionalName;
            document.getElementById('detailRegion').textContent = seed.region.charAt(0).toUpperCase() + seed.region.slice(1) + " Africa";
            document.getElementById('detailKeeperName').textContent = `Seed Keeper: ${seed.keeper.name}`;
            document.getElementById('detailKeeperInfo').textContent = seed.keeper.info;
            document.getElementById('detailKeeperAvatar').textContent = seed.keeper.avatar;
            document.getElementById('detailMemoryText').textContent = seed.memory;
            document.getElementById('detailCulturalSignificance').textContent = seed.culturalSignificance;
            document.getElementById('detailSeasonInfo').textContent = seed.cultivation.season;
            document.getElementById('detailRecipeName').textContent = seed.recipe.name;
            document.getElementById('detailRecipeInstructions').textContent = seed.recipe.instructions;
            
            // Update cultivation grid
            const cultivationGrid = document.getElementById('detailCultivationGrid');
            cultivationGrid.innerHTML = `
                <div class="cultivation-item">
                    <h5><i class="fas fa-sun"></i> Sunlight</h5>
                    <p>${seed.cultivation.sunlight}</p>
                </div>
                <div class="cultivation-item">
                    <h5><i class="fas fa-tint"></i> Water</h5>
                    <p>${seed.cultivation.water}</p>
                </div>
                <div class="cultivation-item">
                    <h5><i class="fas fa-mountain"></i> Soil</h5>
                    <p>${seed.cultivation.soil}</p>
                </div>
                <div class="cultivation-item">
                    <h5><i class="fas fa-ruler-combined"></i> Spacing</h5>
                    <p>${seed.cultivation.spacing}</p>
                </div>
            `;
            
            // Update uses list
            const usesList = document.getElementById('detailUsesList');
            usesList.innerHTML = '';
            seed.uses.forEach(use => {
                const useItem = document.createElement('div');
                useItem.className = 'use-item';
                useItem.innerHTML = `
                    <i class="fas fa-check-circle"></i>
                    <span>${use}</span>
                `;
                usesList.appendChild(useItem);
            });
            
            // Update modal titles
            document.getElementById('requestModalTitle').textContent = `Request ${seed.name} from ${seed.keeper.name}`;
            document.getElementById('requestModalDescription').textContent = `Fill out this form to request ${seed.name}. ${seed.keeper.name} will receive your information and contact you to arrange seed sharing.`;
            document.getElementById('qrModalTitle').textContent = `QR Code for ${seed.name}`;
            
            // Show seed detail page and hide homepage
            homepageContent.style.display = 'none';
            seedDetailPage.style.display = 'block';
            
            // Scroll to top
            window.scrollTo(0, 0);
        }

        // Open request modal
        function openRequestModal(seed) {
            if (seed) {
                currentSeed = seed;
                document.getElementById('requestModalTitle').textContent = `Request ${seed.name} from ${seed.keeper.name}`;
                document.getElementById('requestModalDescription').textContent = `Fill out this form to request ${seed.name}. ${seed.keeper.name} will receive your information and contact you to arrange seed sharing.`;
            }
            requestModal.style.display = 'block';
        }

        // Generate Fake QR Code - SIMPLE DUMMY VERSION
        function generateQRCode(seed) {
            // Clear any existing QR code
            const ctx = qrCodeCanvas.getContext('2d');
            ctx.clearRect(0, 0, qrCodeCanvas.width, qrCodeCanvas.height);
            
            // Create a simple dummy QR code pattern
            const size = 250;
            qrCodeCanvas.width = size;
            qrCodeCanvas.height = size;
            
            // Fill with white background
            ctx.fillStyle = '#ffffff';
            ctx.fillRect(0, 0, size, size);
            
            // Create a simple black square pattern that looks like a QR code
            ctx.fillStyle = '#2d5016'; // Your primary color
            
            // Draw some random squares to simulate QR code pattern
            const squareSize = 10;
            for (let x = 0; x < size; x += squareSize) {
                for (let y = 0; y < size; y += squareSize) {
                    // Randomly decide to draw a square (creates QR-like pattern)
                    if (Math.random() > 0.6) {
                        ctx.fillRect(x, y, squareSize, squareSize);
                    }
                }
            }
            
            // Add "DEMO" text in the center
            ctx.fillStyle = '#2d5016';
            ctx.font = 'bold 20px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('DEMO QR CODE', size/2, size/2);
            
            // Add border
            ctx.strokeStyle = '#2d5016';
            ctx.lineWidth = 10;
            ctx.strokeRect(0, 0, size, size);
        }

        // Show toast notification
        function showToast(message, type = 'success') {
            toast.textContent = message;
            toast.className = 'toast';
            
            if (type === 'error') {
                toast.style.backgroundColor = 'var(--danger)';
            } else if (type === 'warning') {
                toast.style.backgroundColor = 'var(--warning)';
                toast.style.color = 'var(--dark)';
            } else {
                toast.style.backgroundColor = 'var(--success)';
            }
            
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // Check password strength
        function checkPasswordStrength(password) {
            let strength = 0;
            let requirements = {
                length: false,
                uppercase: false,
                lowercase: false,
                number: false,
                special: false
            };
            
            // Check length
            if (password.length >= 8) {
                strength += 20;
                requirements.length = true;
            }
            
            // Check uppercase
            if (/[A-Z]/.test(password)) {
                strength += 20;
                requirements.uppercase = true;
            }
            
            // Check lowercase
            if (/[a-z]/.test(password)) {
                strength += 20;
                requirements.lowercase = true;
            }
            
            // Check numbers
            if (/[0-9]/.test(password)) {
                strength += 20;
                requirements.number = true;
            }
            
            // Check special characters
            if (/[^A-Za-z0-9]/.test(password)) {
                strength += 20;
                requirements.special = true;
            }
            
            return { strength, requirements };
        }

        // Update password strength indicator
        function updatePasswordStrength(password) {
            const { strength, requirements } = checkPasswordStrength(password);
            
            // Update strength bar
            passwordStrengthBar.style.width = `${strength}%`;
            
            // Update strength bar color
            if (strength < 40) {
                passwordStrengthBar.className = 'password-strength-bar strength-weak';
            } else if (strength < 80) {
                passwordStrengthBar.className = 'password-strength-bar strength-medium';
            } else {
                passwordStrengthBar.className = 'password-strength-bar strength-strong';
            }
            
            // Update requirement indicators
            updateRequirementIndicator(lengthReq, requirements.length);
            updateRequirementIndicator(uppercaseReq, requirements.uppercase);
            updateRequirementIndicator(lowercaseReq, requirements.lowercase);
            updateRequirementIndicator(numberReq, requirements.number);
            updateRequirementIndicator(specialReq, requirements.special);
            
            // Enable/disable submit button
            signupSubmitBtn.disabled = strength < 80;
        }

        // Update requirement indicator
        function updateRequirementIndicator(element, isValid) {
            const icon = element.querySelector('i');
            if (isValid) {
                element.classList.add('valid');
                icon.className = 'fas fa-check';
            } else {
                element.classList.remove('valid');
                icon.className = 'fas fa-times';
            }
        }

        // Check login status
        function checkLoginStatus() {
            // In a real app, this would check localStorage or a session
            // For demo purposes, we'll just check our isLoggedIn variable
            if (isLoggedIn) {
                updateAuthButtons();
            }
        }

        // Update authentication buttons
        function updateAuthButtons() {
            const authButtons = document.querySelector('.auth-buttons');
            if (isLoggedIn) {
                authButtons.innerHTML = `
                    <button class="btn" id="profileBtn">
                        <i class="fas fa-user"></i> ${currentUser.name}
                    </button>
                    <button class="btn btn-secondary" id="logoutBtn">Logout</button>
                `;
                
                // Add event listeners for new buttons
                document.getElementById('logoutBtn').addEventListener('click', logout);
            } else {
                authButtons.innerHTML = '<button class="btn btn-secondary" id="loginBtn">Sign In</button>';
                // Re-add event listener for login button
                document.getElementById('loginBtn').addEventListener('click', function() {
                    loginModal.style.display = 'block';
                });
            }
        }

        // Logout function
        function logout() {
            isLoggedIn = false;
            currentUser = null;
            updateAuthButtons();
            showToast('You have been logged out successfully.');
        }

        // Add a new seed
        function addNewSeed(seedData) {
            const newSeed = {
                id: Date.now(),
                name: seedData.name,
                traditionalName: seedData.traditionalName,
                image: "https://images.unsplash.com/photo-1597848212624-e5d4f4b9e837?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
                description: seedData.description,
                keeper: {
                    name: currentUser.name,
                    info: "Community member",
                    avatar: currentUser.name.charAt(0).toUpperCase()
                },
                story: seedData.story || "This seed has been shared by a community member.",
                memory: seedData.memory || "Personal memory shared by the keeper.",
                culturalSignificance: seedData.culturalSignificance || "Cultural significance of this seed.",
                cultivation: {
                    sunlight: "Full sun",
                    water: "Moderate water needs",
                    soil: "Well-drained soil",
                    spacing: "Standard spacing",
                    season: "Appropriate season"
                },
                uses: seedData.uses ? seedData.uses.split(',').map(use => use.trim()) : ["Traditional uses"],
                recipe: {
                    name: seedData.recipeName || "Traditional recipe",
                    instructions: seedData.recipeInstructions || "Traditional preparation method."
                },
                isVerified: false,
                type: seedData.type,
                region: seedData.region,
                userAdded: true
            };
            
            seeds.push(newSeed);
            saveUserSeedsToStorage();
            displaySeeds(seeds);
            showToast('Your seed has been added to the vault!');
        }

        // Setup event listeners
        function setupEventListeners() {
            // Navigation
            backToBrowse.addEventListener('click', function(e) {
                e.preventDefault();
                homepageContent.style.display = 'block';
                seedDetailPage.style.display = 'none';
                // Reset audio if playing
                resetAudioProgress(detailAudioProgress, detailAudioTime, detailPlayAudioBtn);
            });
            
            // Modal open buttons
            detailRequestSeedsBtn.addEventListener('click', function() {
                openRequestModal(currentSeed);
            });
            
            detailCtaRequestBtn.addEventListener('click', function() {
                openRequestModal(currentSeed);
            });
            
            detailViewQrCodeBtn.addEventListener('click', function() {
                if (currentSeed) {
                    generateQRCode(currentSeed);
                    qrModal.style.display = 'block';
                }
            });
            
            // Modal close buttons
            closeModalButtons.forEach(button => {
                button.addEventListener('click', function() {
                    this.closest('.modal').style.display = 'none';
                });
            });
            
            cancelRequestBtn.addEventListener('click', function() {
                requestModal.style.display = 'none';
            });
            
            cancelAddSeedBtn.addEventListener('click', function() {
                addSeedModal.style.display = 'none';
            });
            
            // Close modal when clicking outside
            window.addEventListener('click', function(event) {
                if (event.target.classList.contains('modal')) {
                    event.target.style.display = 'none';
                }
            });
            
            // Audio player
            detailPlayAudioBtn.addEventListener('click', function() {
                const icon = this.querySelector('i');
                
                if (icon.classList.contains('fa-play')) {
                    icon.classList.remove('fa-play');
                    icon.classList.add('fa-pause');
                    simulateAudioPlay(detailAudioProgress, detailAudioTime, detailPlayAudioBtn);
                } else {
                    icon.classList.remove('fa-pause');
                    icon.classList.add('fa-play');
                    resetAudioProgress(detailAudioProgress, detailAudioTime, detailPlayAudioBtn);
                }
            });
            
            // Search functionality
            const searchInput = document.querySelector('.search-box input');
            searchInput.addEventListener('input', function() {
                filterSeeds();
            });
            
            // Filter functionality
            document.getElementById('type-filter').addEventListener('change', filterSeeds);
            document.getElementById('region-filter').addEventListener('change', filterSeeds);
            document.getElementById('verified-filter').addEventListener('change', filterSeeds);
            
            // Button actions
            loginBtn.addEventListener('click', function() {
                loginModal.style.display = 'block';
            });
            
            browseSeedsBtn.addEventListener('click', function() {
                document.getElementById('seeds').scrollIntoView({ behavior: 'smooth' });
            });
            
            addSeedBtn.addEventListener('click', function() {
                if (isLoggedIn) {
                    addSeedModal.style.display = 'block';
                } else {
                    showToast('Please sign in to add a seed', 'warning');
                    loginModal.style.display = 'block';
                }
            });
            
            exploreVaultBtn.addEventListener('click', function() {
                document.getElementById('seeds').scrollIntoView({ behavior: 'smooth' });
            });
            
            joinLocalCommunityBtn.addEventListener('click', function() {
                signupModal.style.display = 'block';
            });
            
            joinMovementBtn.addEventListener('click', function() {
                document.getElementById('community').scrollIntoView({ behavior: 'smooth' });
            });
            
            // Map controls
            resetMapViewBtn.addEventListener('click', function() {
                communityMap.setView([8.7832, 34.5085], 3);
            });
            
            locateMeBtn.addEventListener('click', function() {
                if (navigator.geolocation) {
                    navigator.geolocation.getCurrentPosition(function(position) {
                        const lat = position.coords.latitude;
                        const lng = position.coords.longitude;
                        communityMap.setView([lat, lng], 10);
                        
                        // Add a marker at user's location
                        L.marker([lat, lng]).addTo(communityMap)
                            .bindPopup("You are here!")
                            .openPopup();
                    }, function(error) {
                        showToast('Unable to get your location. Please ensure location services are enabled.', 'error');
                    });
                } else {
                    showToast('Geolocation is not supported by this browser.', 'error');
                }
            });
            
            // Password strength indicator
            signupPassword.addEventListener('input', function() {
                updatePasswordStrength(this.value);
            });
            
            // Form submissions
            loginForm.addEventListener('submit', function(e) {
                e.preventDefault();
                showToast('Login successful! Welcome back.');
                loginModal.style.display = 'none';
                isLoggedIn = true;
                currentUser = {
                    name: "User",
                    email: document.getElementById('loginEmail').value
                };
                updateAuthButtons();
            });
            
            signupForm.addEventListener('submit', function(e) {
                e.preventDefault();
                const password = signupPassword.value;
                const { strength } = checkPasswordStrength(password);
                const name = document.getElementById('signupName').value;
                const location = document.getElementById('signupLocation').value;
                
                if (strength >= 80) {
                    // Geocode the location and add to map
                    geocodeLocation(location, function(coordinates) {
                        addCommunityMember(name, location, coordinates);
                        showToast('Account created successfully! Welcome to the community. You have been added to the map.');
                        signupModal.style.display = 'none';
                        isLoggedIn = true;
                        currentUser = {
                            name: name,
                            email: document.getElementById('signupEmail').value,
                            location: location
                        };
                        updateAuthButtons();
                        signupForm.reset();
                        // Reset password strength indicator
                        updatePasswordStrength('');
                        
                        // Scroll to community section to show the new member on map
                        document.getElementById('community').scrollIntoView({ behavior: 'smooth' });
                    });
                } else {
                    showToast('Please ensure your password meets all requirements.', 'error');
                }
            });
            
            addSeedForm.addEventListener('submit', function(e) {
                e.preventDefault();
                const formData = {
                    name: document.getElementById('seedName').value,
                    traditionalName: document.getElementById('seedTraditionalName').value,
                    description: document.getElementById('seedDescription').value,
                    type: document.getElementById('seedType').value,
                    region: document.getElementById('seedRegion').value,
                    story: document.getElementById('seedStory').value,
                    memory: document.getElementById('seedMemory').value,
                    culturalSignificance: document.getElementById('seedCulturalSignificance').value,
                    uses: document.getElementById('seedUses').value,
                    recipeName: document.getElementById('seedRecipeName').value,
                    recipeInstructions: document.getElementById('seedRecipeInstructions').value
                };
                
                addNewSeed(formData);
                addSeedModal.style.display = 'none';
                addSeedForm.reset();
            });
            
            requestForm.addEventListener('submit', function(e) {
                e.preventDefault();
                if (currentSeed) {
                    showToast(`Your request for ${currentSeed.name} has been sent to ${currentSeed.keeper.name}. You will be contacted soon.`);
                } else {
                    showToast('Your request has been sent. The seed keeper will contact you soon.');
                }
                requestModal.style.display = 'none';
                requestForm.reset();
            });
            
            // Tab switching
            tabButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const isSignIn = this.textContent === 'Sign In';
                    
                    if (isSignIn) {
                        loginModal.style.display = 'block';
                        signupModal.style.display = 'none';
                    } else {
                        signupModal.style.display = 'block';
                        loginModal.style.display = 'none';
                    }
                });
            });
            
            // Category buttons
            document.querySelectorAll('.category-explore-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const category = this.getAttribute('data-category');
                    document.getElementById('seeds').scrollIntoView({ behavior: 'smooth' });
                    
                    // Set the filter to this category
                    document.getElementById('type-filter').value = category;
                    filterSeeds();
                    
                    const categoryNames = {
                        'grain': 'Indigenous Grains',
                        'vegetable': 'Indigenous Vegetables',
                        'tuber': 'Tubers & Roots',
                        'fruit': 'Fruits & Nuts',
                        'legume': 'Legumes & Seeds'
                    };
                    
                    showToast(`Now showing ${categoryNames[category]}`);
                });
            });
        }

        // Filter seeds based on search and filters
        function filterSeeds() {
            const searchTerm = document.querySelector('.search-box input').value.toLowerCase();
            const typeFilter = document.getElementById('type-filter').value;
            const regionFilter = document.getElementById('region-filter').value;
            const verifiedFilter = document.getElementById('verified-filter').value;
            
            const filteredSeeds = seeds.filter(seed => {
                const matchesSearch = seed.name.toLowerCase().includes(searchTerm) || 
                                     seed.description.toLowerCase().includes(searchTerm) ||
                                     seed.traditionalName.toLowerCase().includes(searchTerm);
                const matchesType = !typeFilter || seed.type === typeFilter;
                const matchesRegion = !regionFilter || seed.region === regionFilter;
                const matchesVerified = !verifiedFilter || 
                                       (verifiedFilter === 'verified' && seed.isVerified);
                
                return matchesSearch && matchesType && matchesRegion && matchesVerified;
            });
            
            displaySeeds(filteredSeeds);
        }

        // Simulate audio playback
        function simulateAudioPlay(progressBar, timeDisplay, playButton) {
            // Clear any existing interval
            if (currentAudioInterval) {
                clearInterval(currentAudioInterval);
            }
            
            let progress = 0;
            currentAudioInterval = setInterval(() => {
                if (progress >= 100) {
                    clearInterval(currentAudioInterval);
                    resetAudioProgress(progressBar, timeDisplay, playButton);
                    return;
                }
                
                progress += 0.5;
                progressBar.style.width = `${progress}%`;
                
                // Calculate time display
                const totalSeconds = 120; // 2 minutes
                const currentSeconds = Math.floor(totalSeconds * (progress / 100));
                const minutes = Math.floor(currentSeconds / 60);
                const seconds = currentSeconds % 60;
                timeDisplay.textContent = `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
                
                // Check if user paused
                if (playButton.querySelector('i').classList.contains('fa-play')) {
                    clearInterval(currentAudioInterval);
                }
            }, 50);
        }

        // Reset audio progress
        function resetAudioProgress(progressBar, timeDisplay, playButton) {
            progressBar.style.width = '0%';
            timeDisplay.textContent = '0:00';
            playButton.querySelector('i').classList.remove('fa-pause');
            playButton.querySelector('i').classList.add('fa-play');
            
            // Clear interval if exists
            if (currentAudioInterval) {
                clearInterval(currentAudioInterval);
                currentAudioInterval = null;
            }
        }